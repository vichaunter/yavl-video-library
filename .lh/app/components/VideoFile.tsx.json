{
    "sourceFile": "app/components/VideoFile.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1708278050000,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1708278865077,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -195,9 +195,8 @@\n       {info?.title && (\r\n         <Cover title={info.title} backdrop={info?.tmdb?.backdrop_path} />\r\n       )}\r\n       <div className=\"info\">\r\n-        <Watched title={info?.title} />\r\n         {info?.title && <Info data={info} />}\r\n         {!info?.title && <span>{name}</span>}\r\n         {info?.title && (\r\n           <button className=\"trakt\" onClick={handleOpenTraktr}>\r\n"
                },
                {
                    "date": 1708279421992,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,8 @@\n import Codec from \"./Codec\";\r\n import Flag from \"./Flag\";\r\n import Quality from \"./Quality\";\r\n import trakticon from \"./icons/TraktIcon\";\r\n-import Watched from \"./VideoFile/Watched\";\r\n \r\n const StyledVideo = styled(Col)`\r\n   position: relative;\r\n \r\n"
                }
            ],
            "date": 1708278050000,
            "name": "Commit-0",
            "content": "import MessageOutlined from \"@ant-design/icons/lib/icons/MessageOutlined\";\r\nimport SoundOutlined from \"@ant-design/icons/lib/icons/SoundOutlined\";\r\nimport { basename } from \"path\";\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\nimport { PlaySquareFilled } from \"@ant-design/icons\";\r\nimport { Col } from \"antd\";\r\nimport { ipcRenderer, shell } from \"electron\";\r\nimport styled from \"styled-components\";\r\nimport notfoundSrc from \"../images/flagging/notfound.jpg\";\r\nimport store from \"../services/store\";\r\nimport reduceFilename from \"../tools/reduce-filename\";\r\nimport Codec from \"./Codec\";\r\nimport Flag from \"./Flag\";\r\nimport Quality from \"./Quality\";\r\nimport trakticon from \"./icons/TraktIcon\";\r\nimport Watched from \"./VideoFile/Watched\";\r\n\r\nconst StyledVideo = styled(Col)`\r\n  position: relative;\r\n\r\n  &:hover {\r\n    .info {\r\n      .extra {\r\n        background-color: rgba(0, 0, 0, 0.8);\r\n        .description {\r\n          display: block;\r\n          padding-bottom: 1rem;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .info {\r\n    height: 100%;\r\n\r\n    .title {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      font-size: 1.5rem;\r\n      background-color: rgba(0, 0, 0, 0.7);\r\n      border-radius: 0 1rem 1rem 0;\r\n      color: white;\r\n      padding: 0.35rem 1rem;\r\n      span {\r\n        font-size: 1rem;\r\n      }\r\n    }\r\n\r\n    .extra {\r\n      position: absolute;\r\n      bottom: 0;\r\n      width: 100%;\r\n      background-color: rgba(0, 0, 0, 0.4);\r\n      padding: 0.35rem 1rem;\r\n\r\n      .description {\r\n        color: white;\r\n        display: none;\r\n      }\r\n    }\r\n  }\r\n\r\n  .cover {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-size: cover;\r\n  }\r\n\r\n  .trakt {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    border: none;\r\n    background: transparent;\r\n    padding: 0.4rem;\r\n    cursor: pointer;\r\n\r\n    svg {\r\n      width: 2rem;\r\n    }\r\n  }\r\n\r\n  .quality {\r\n    img {\r\n      width: 3rem;\r\n      height: 2rem;\r\n    }\r\n  }\r\n\r\n  .icon {\r\n    color: white;\r\n    padding-right: 1rem;\r\n  }\r\n\r\n  .play {\r\n    color: white;\r\n    position: absolute;\r\n    z-index: 10;\r\n    bottom: 0;\r\n    right: 0;\r\n    padding: 1rem;\r\n\r\n    svg {\r\n      width: 2rem;\r\n      height: 2rem;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Audio = ({ languages }) => {\r\n  return (\r\n    <div className=\"languages audio\">\r\n      <SoundOutlined className=\"icon\" />\r\n      {languages.map((stream, idx) => (\r\n        <Flag\r\n          // eslint-disable-next-line react/no-array-index-key\r\n          key={`${stream.language}_${stream.codecName}_${idx}`}\r\n          language={stream.language}\r\n          title={stream.codecName}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Subtitle = ({ languages }) => (\r\n  <div className=\"languages subtitle\">\r\n    <MessageOutlined className=\"icon\" />\r\n    {languages.map((stream, idx) => (\r\n      <Flag\r\n        // eslint-disable-next-line react/no-array-index-key\r\n        key={`${stream.language}_${stream.title}_${idx}`}\r\n        language={stream.language}\r\n        title={stream.title}\r\n      />\r\n    ))}\r\n  </div>\r\n);\r\n\r\nconst Info = ({ data }) => (\r\n  <>\r\n    <span className=\"title\">\r\n      {data.title} <span>({data?.tmdb?.release_date?.slice(0, 4)})</span>\r\n    </span>\r\n    <div className=\"extra\">\r\n      <div className=\"description\">{data?.tmdb?.overview}</div>\r\n      <div className=\"audio\">\r\n        {data.audio.length && <Audio languages={data.audio} />}\r\n      </div>\r\n      {data.subtitle.length && <Subtitle languages={data.subtitle} />}\r\n      <div className=\"quality\">\r\n        <Quality value={data.quality} />\r\n        <Codec value={data.codecName} />\r\n      </div>\r\n    </div>\r\n  </>\r\n);\r\n\r\n// eslint-disable-next-line camelcase\r\nconst Cover = ({ title, backdrop }) => (\r\n  <img className=\"cover\" alt={title} src={backdrop || notfoundSrc} />\r\n);\r\n\r\nconst VideoFile = ({ dirent }) => {\r\n  const [info, setInfo] = useState(null);\r\n  const filePath = dirent.fullPath;\r\n\r\n  useEffect(() => {\r\n    const update = async () => {\r\n      let info = await store.getMovieInfo(dirent.fullPath, dirent.altTitle);\r\n      setInfo(info);\r\n    };\r\n\r\n    update();\r\n  }, []);\r\n\r\n  const handleOpenTraktr = () => {\r\n    shell.openExternal(\r\n      `https://trakt.tv/search?query=${info?.title?.split(\" \").join(\"+\")}`\r\n    );\r\n  };\r\n\r\n  const handleOpenVideo = () => {\r\n    ipcRenderer.send(\"open-file\", dirent.fullPath);\r\n  };\r\n\r\n  const name = reduceFilename(basename(filePath));\r\n\r\n  if (!info?.title || !info) <StyledVideo>Missing info</StyledVideo>;\r\n\r\n  return (\r\n    <StyledVideo xs={24} lg={12} xl={8} xxl={6} onDoubleClick={handleOpenVideo}>\r\n      {info?.title && (\r\n        <Cover title={info.title} backdrop={info?.tmdb?.backdrop_path} />\r\n      )}\r\n      <div className=\"info\">\r\n      <Watched title={info?.title} />\r\n        {info?.title && <Info data={info} />}\r\n        {!info?.title && <span>{name}</span>}\r\n        {info?.title && (\r\n          <button className=\"trakt\" onClick={handleOpenTraktr}>\r\n            {trakticon}\r\n          </button>\r\n        )}\r\n        <PlaySquareFilled className=\"play\" onClick={handleOpenVideo} />\r\n      </div>\r\n    </StyledVideo>\r\n  );\r\n};\r\n\r\nVideoFile.defaultProps = {\r\n  filePath: \"\",\r\n  onDoubleClick: () => null,\r\n};\r\n\r\nexport default VideoFile;\r\n"
        }
    ]
}